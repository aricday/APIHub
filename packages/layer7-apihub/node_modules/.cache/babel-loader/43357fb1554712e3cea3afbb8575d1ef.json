{"ast":null,"code":"import _slicedToArray from\"/Users/aricday/Projects/APIHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/aricday/Projects/APIHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import{useEffect,useState}from'react';import{useApiHub}from'../ApiHubContext';export var fetchResetPassword=function fetchResetPassword(url,username){var response;return _regeneratorRuntime.async(function fetchResetPassword$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(fetch(\"\".concat(url,\"/admin/Portal.svc/ResetMyPassword()?Username='\").concat(username,\"'\")));case 2:response=_context.sent;if(!(response.status<200||response.status>=300)){_context.next=5;break;}throw new Error(response.statusText);case 5:_context.next=7;return _regeneratorRuntime.awrap(response.json());case 7:return _context.abrupt(\"return\",_context.sent);case 8:case\"end\":return _context.stop();}}});};export var useResetPassword=function useResetPassword(){var _useApiHub=useApiHub(),url=_useApiHub.url;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),fetched=_useState4[0],setFetched=_useState4[1];useEffect(function(){if(!fetched&&username!==''){fetchResetPassword(url,username).then(function(){setFetched(true);});}},[url,fetched,username]);return[username,setUsername];};","map":{"version":3,"sources":["/Users/aricday/Projects/APIHub/packages/layer7-apihub/src/authentication/useResetPassword.js"],"names":["useEffect","useState","useApiHub","fetchResetPassword","url","username","fetch","response","status","Error","statusText","json","useResetPassword","setUsername","fetched","setFetched","then"],"mappings":"iSAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CAEA,OAASC,SAAT,KAA0B,kBAA1B,CAEA,MAAO,IAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAOC,GAAP,CAAYC,QAAZ,4LACPC,KAAK,WACrBF,GADqB,0DAC+BC,QAD/B,MADE,SACxBE,QADwB,oBAK1BA,QAAQ,CAACC,MAAT,CAAkB,GAAlB,EAAyBD,QAAQ,CAACC,MAAT,EAAmB,GALlB,+BAMpB,IAAIC,CAAAA,KAAJ,CAAUF,QAAQ,CAACG,UAAnB,CANoB,yDASjBH,QAAQ,CAACI,IAAT,EATiB,sGAA3B,CAYP,MAAO,IAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,gBAClBV,SAAS,EADS,CAC1BE,GAD0B,YAC1BA,GAD0B,eAEFH,QAAQ,CAAC,EAAD,CAFN,wCAE3BI,QAF2B,eAEjBQ,WAFiB,8BAGJZ,QAAQ,CAAC,KAAD,CAHJ,yCAG3Ba,OAH2B,eAGlBC,UAHkB,eAKlCf,SAAS,CAAC,UAAM,CACZ,GAAI,CAACc,OAAD,EAAYT,QAAQ,GAAK,EAA7B,CAAiC,CAC7BF,kBAAkB,CAACC,GAAD,CAAMC,QAAN,CAAlB,CAAkCW,IAAlC,CAAuC,UAAM,CACzCD,UAAU,CAAC,IAAD,CAAV,CACH,CAFD,EAGH,CACJ,CANQ,CAMN,CAACX,GAAD,CAAMU,OAAN,CAAeT,QAAf,CANM,CAAT,CAQA,MAAO,CAACA,QAAD,CAAWQ,WAAX,CAAP,CACH,CAdM","sourcesContent":["import { useEffect, useState } from 'react';\n\nimport { useApiHub } from '../ApiHubContext';\n\nexport const fetchResetPassword = async (url, username) => {\n    const response = await fetch(\n        `${url}/admin/Portal.svc/ResetMyPassword()?Username='${username}'`\n    );\n\n    if (response.status < 200 || response.status >= 300) {\n        throw new Error(response.statusText);\n    }\n\n    return await response.json();\n};\n\nexport const useResetPassword = () => {\n    const { url } = useApiHub();\n    const [username, setUsername] = useState('');\n    const [fetched, setFetched] = useState(false);\n\n    useEffect(() => {\n        if (!fetched && username !== '') {\n            fetchResetPassword(url, username).then(() => {\n                setFetched(true);\n            });\n        }\n    }, [url, fetched, username]);\n\n    return [username, setUsername];\n};\n"]},"metadata":{},"sourceType":"module"}
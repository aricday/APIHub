{"ast":null,"code":"import React,{forwardRef}from'react';import{useTranslate,useGetManyReference}from'ra-core';import LinearProgress from'@material-ui/core/LinearProgress';import Typography from'@material-ui/core/Typography';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import Link from'@material-ui/core/Link';import Button from'@material-ui/core/Button';import{makeStyles}from'@material-ui/core/styles';import get from'lodash/get';import{useApiHub}from'../ApiHubContext';var useStyles=makeStyles(function(theme){return{error:{color:theme.palette.error.main,marginBottom:theme.spacing()}};});var DownloadButton=forwardRef(function(props,ref){return React.createElement(Button,Object.assign({variant:\"outlined\",color:\"primary\",ref:ref},props));});var DownloadFilesButton=function DownloadFilesButton(_ref){var id=_ref.id;var translate=useTranslate();var _useApiHub=useApiHub(),urlWithTenant=_useApiHub.urlWithTenant;var href=\"\".concat(urlWithTenant,\"/api-management/1.0/apis/\").concat(id,\"/assets/archive\");var label=translate('resources.apis.overview.actions.download_assets');return React.createElement(Link,{component:DownloadButton,href:href,download:\"assets.zip\",\"aria-label\":label},label);};export var ApiAssetsField=function ApiAssetsField(_ref2){var id=_ref2.id;var translate=useTranslate();var classes=useStyles();var _useGetManyReference=useGetManyReference('assets','id',id,undefined,undefined,undefined,'apis'),data=_useGetManyReference.data,loaded=_useGetManyReference.loaded,error=_useGetManyReference.error;if(!loaded){return React.createElement(LinearProgress,null);}if(error){return React.createElement(Typography,{variant:\"body1\",className:classes.error},translate('ra.page.error'));}if(!data){return React.createElement(Typography,{variant:\"body1\"},translate('resources.apis.overview.notifications.no_assets'));}var links=Object.keys(data).map(function(key){var _data$key=data[key],id=_data$key.id,name=_data$key.name,type=_data$key.type,links=_data$key.links;return{id:id,name:name,type:type,href:get(links,'[0].href',null),rel:get(links,'[0].rel',null)};});return React.createElement(AssetsList,{id:id,links:links});};export var AssetsList=function AssetsList(_ref3){var id=_ref3.id,links=_ref3.links;var _useApiHub2=useApiHub(),urlWithTenant=_useApiHub2.urlWithTenant;return React.createElement(React.Fragment,null,React.createElement(List,null,links.length>0&&links.map(function(link){return React.createElement(ListItem,{key:link.id,disableGutters:true},React.createElement(Link,{type:link.type,href:\"\".concat(urlWithTenant).concat(link.href),download:link.name},link.name));})),links.length>1?React.createElement(DownloadFilesButton,{id:id}):null);};ApiAssetsField.__docgenInfo={\"description\":\"\",\"methods\":[],\"displayName\":\"ApiAssetsField\"};if(typeof STORYBOOK_REACT_CLASSES!==\"undefined\"){STORYBOOK_REACT_CLASSES[\"src/apis/ApiAssetsField.js\"]={name:\"ApiAssetsField\",docgenInfo:ApiAssetsField.__docgenInfo,path:\"src/apis/ApiAssetsField.js\"};}AssetsList.__docgenInfo={\"description\":\"\",\"methods\":[],\"displayName\":\"AssetsList\"};if(typeof STORYBOOK_REACT_CLASSES!==\"undefined\"){STORYBOOK_REACT_CLASSES[\"src/apis/ApiAssetsField.js\"]={name:\"AssetsList\",docgenInfo:AssetsList.__docgenInfo,path:\"src/apis/ApiAssetsField.js\"};}","map":{"version":3,"sources":["/Users/aricday/Projects/APIHub/packages/layer7-apihub/src/apis/ApiAssetsField.js"],"names":["React","forwardRef","useTranslate","useGetManyReference","LinearProgress","Typography","List","ListItem","Link","Button","makeStyles","get","useApiHub","useStyles","theme","error","color","palette","main","marginBottom","spacing","DownloadButton","props","ref","DownloadFilesButton","id","translate","urlWithTenant","href","label","ApiAssetsField","classes","undefined","data","loaded","links","Object","keys","map","key","name","type","rel","AssetsList","length","link"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CACA,OAASC,YAAT,CAAuBC,mBAAvB,KAAkD,SAAlD,CACA,MAAOC,CAAAA,cAAP,KAA2B,kCAA3B,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,GAAP,KAAgB,YAAhB,CACA,OAASC,SAAT,KAA0B,kBAA1B,CAEA,GAAMC,CAAAA,SAAS,CAAGH,UAAU,CAAC,SAAAI,KAAK,QAAK,CACnCC,KAAK,CAAE,CACHC,KAAK,CAAEF,KAAK,CAACG,OAAN,CAAcF,KAAd,CAAoBG,IADxB,CAEHC,YAAY,CAAEL,KAAK,CAACM,OAAN,EAFX,CAD4B,CAAL,EAAN,CAA5B,CAOA,GAAMC,CAAAA,cAAc,CAAGpB,UAAU,CAAC,SAACqB,KAAD,CAAQC,GAAR,QAC9B,qBAAC,MAAD,gBAAQ,OAAO,CAAC,UAAhB,CAA2B,KAAK,CAAC,SAAjC,CAA2C,GAAG,CAAEA,GAAhD,EAAyDD,KAAzD,EAD8B,EAAD,CAAjC,CAIA,GAAME,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,MAAY,IAATC,CAAAA,EAAS,MAATA,EAAS,CACpC,GAAMC,CAAAA,SAAS,CAAGxB,YAAY,EAA9B,CADoC,eAEVU,SAAS,EAFC,CAE5Be,aAF4B,YAE5BA,aAF4B,CAIpC,GAAMC,CAAAA,IAAI,WAAMD,aAAN,qCAA+CF,EAA/C,mBAAV,CACA,GAAMI,CAAAA,KAAK,CAAGH,SAAS,CAAC,iDAAD,CAAvB,CACA,MACI,qBAAC,IAAD,EACI,SAAS,CAAEL,cADf,CAEI,IAAI,CAAEO,IAFV,CAGI,QAAQ,CAAC,YAHb,CAII,aAAYC,KAJhB,EAMKA,KANL,CADJ,CAUH,CAhBD,CAkBA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,OAAY,IAATL,CAAAA,EAAS,OAATA,EAAS,CACtC,GAAMC,CAAAA,SAAS,CAAGxB,YAAY,EAA9B,CACA,GAAM6B,CAAAA,OAAO,CAAGlB,SAAS,EAAzB,CAFsC,yBAINV,mBAAmB,CAC/C,QAD+C,CAE/C,IAF+C,CAG/CsB,EAH+C,CAI/CO,SAJ+C,CAK/CA,SAL+C,CAM/CA,SAN+C,CAO/C,MAP+C,CAJb,CAI9BC,IAJ8B,sBAI9BA,IAJ8B,CAIxBC,MAJwB,sBAIxBA,MAJwB,CAIhBnB,KAJgB,sBAIhBA,KAJgB,CActC,GAAI,CAACmB,MAAL,CAAa,CACT,MAAO,qBAAC,cAAD,MAAP,CACH,CAED,GAAInB,KAAJ,CAAW,CACP,MACI,qBAAC,UAAD,EAAY,OAAO,CAAC,OAApB,CAA4B,SAAS,CAAEgB,OAAO,CAAChB,KAA/C,EACKW,SAAS,CAAC,eAAD,CADd,CADJ,CAKH,CAED,GAAI,CAACO,IAAL,CAAW,CACP,MACI,qBAAC,UAAD,EAAY,OAAO,CAAC,OAApB,EACKP,SAAS,CAAC,iDAAD,CADd,CADJ,CAKH,CAED,GAAMS,CAAAA,KAAK,CAAGC,MAAM,CAACC,IAAP,CAAYJ,IAAZ,EAAkBK,GAAlB,CAAsB,SAAAC,GAAG,CAAI,eACLN,IAAI,CAACM,GAAD,CADC,CAC/Bd,EAD+B,WAC/BA,EAD+B,CAC3Be,IAD2B,WAC3BA,IAD2B,CACrBC,IADqB,WACrBA,IADqB,CACfN,KADe,WACfA,KADe,CAEvC,MAAO,CACHV,EAAE,CAAFA,EADG,CAEHe,IAAI,CAAJA,IAFG,CAGHC,IAAI,CAAEA,IAHH,CAIHb,IAAI,CAAEjB,GAAG,CAACwB,KAAD,CAAQ,UAAR,CAAoB,IAApB,CAJN,CAKHO,GAAG,CAAE/B,GAAG,CAACwB,KAAD,CAAQ,SAAR,CAAmB,IAAnB,CALL,CAAP,CAOH,CATa,CAAd,CAWA,MAAO,qBAAC,UAAD,EAAY,EAAE,CAAEV,EAAhB,CAAoB,KAAK,CAAEU,KAA3B,EAAP,CACH,CA9CM,CAgDP,MAAO,IAAMQ,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,OAAmB,IAAhBlB,CAAAA,EAAgB,OAAhBA,EAAgB,CAAZU,KAAY,OAAZA,KAAY,iBACfvB,SAAS,EADM,CACjCe,aADiC,aACjCA,aADiC,CAGzC,MACI,yCACI,oBAAC,IAAD,MACKQ,KAAK,CAACS,MAAN,CAAe,CAAf,EACGT,KAAK,CAACG,GAAN,CAAU,SAAAO,IAAI,QACV,qBAAC,QAAD,EAAU,GAAG,CAAEA,IAAI,CAACpB,EAApB,CAAwB,cAAc,KAAtC,EACI,oBAAC,IAAD,EACI,IAAI,CAAEoB,IAAI,CAACJ,IADf,CAEI,IAAI,WAAKd,aAAL,SAAqBkB,IAAI,CAACjB,IAA1B,CAFR,CAGI,QAAQ,CAAEiB,IAAI,CAACL,IAHnB,EAKKK,IAAI,CAACL,IALV,CADJ,CADU,EAAd,CAFR,CADJ,CAeKL,KAAK,CAACS,MAAN,CAAe,CAAf,CAAmB,oBAAC,mBAAD,EAAqB,EAAE,CAAEnB,EAAzB,EAAnB,CAAqD,IAf1D,CADJ,CAmBH,CAtBM,C","sourcesContent":["import React, { forwardRef } from 'react';\nimport { useTranslate, useGetManyReference } from 'ra-core';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Typography from '@material-ui/core/Typography';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Link from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport get from 'lodash/get';\nimport { useApiHub } from '../ApiHubContext';\n\nconst useStyles = makeStyles(theme => ({\n    error: {\n        color: theme.palette.error.main,\n        marginBottom: theme.spacing(),\n    },\n}));\n\nconst DownloadButton = forwardRef((props, ref) => (\n    <Button variant=\"outlined\" color=\"primary\" ref={ref} {...props} />\n));\n\nconst DownloadFilesButton = ({ id }) => {\n    const translate = useTranslate();\n    const { urlWithTenant } = useApiHub();\n\n    const href = `${urlWithTenant}/api-management/1.0/apis/${id}/assets/archive`;\n    const label = translate('resources.apis.overview.actions.download_assets');\n    return (\n        <Link\n            component={DownloadButton}\n            href={href}\n            download=\"assets.zip\"\n            aria-label={label}\n        >\n            {label}\n        </Link>\n    );\n};\n\nexport const ApiAssetsField = ({ id }) => {\n    const translate = useTranslate();\n    const classes = useStyles();\n\n    const { data, loaded, error } = useGetManyReference(\n        'assets',\n        'id',\n        id,\n        undefined,\n        undefined,\n        undefined,\n        'apis'\n    );\n\n    if (!loaded) {\n        return <LinearProgress />;\n    }\n\n    if (error) {\n        return (\n            <Typography variant=\"body1\" className={classes.error}>\n                {translate('ra.page.error')}\n            </Typography>\n        );\n    }\n\n    if (!data) {\n        return (\n            <Typography variant=\"body1\">\n                {translate('resources.apis.overview.notifications.no_assets')}\n            </Typography>\n        );\n    }\n\n    const links = Object.keys(data).map(key => {\n        const { id, name, type, links } = data[key];\n        return {\n            id,\n            name,\n            type: type,\n            href: get(links, '[0].href', null),\n            rel: get(links, '[0].rel', null),\n        };\n    });\n\n    return <AssetsList id={id} links={links} />;\n};\n\nexport const AssetsList = ({ id, links }) => {\n    const { urlWithTenant } = useApiHub();\n\n    return (\n        <>\n            <List>\n                {links.length > 0 &&\n                    links.map(link => (\n                        <ListItem key={link.id} disableGutters>\n                            <Link\n                                type={link.type}\n                                href={`${urlWithTenant}${link.href}`}\n                                download={link.name}\n                            >\n                                {link.name}\n                            </Link>\n                        </ListItem>\n                    ))}\n            </List>\n            {links.length > 1 ? <DownloadFilesButton id={id} /> : null}\n        </>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}
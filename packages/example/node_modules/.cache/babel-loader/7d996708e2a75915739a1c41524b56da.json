{"ast":null,"code":"import _slicedToArray from \"/Users/aricday/Projects/APIHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useEffect } from 'react';\nimport { List as RaList, Pagination as RaPagination } from 'react-admin';\nimport { ViewTitle } from './ViewTitle';\nimport { useApiHubPreference, readApiHubPreference } from '../preferences';\n\nconst Pagination = props => {\n  const resource = props.resource,\n        perPage = props.perPage,\n        setPerPage = props.setPerPage;\n\n  const _useApiHubPreference = useApiHubPreference(`perPage/${resource}`, perPage),\n        _useApiHubPreference2 = _slicedToArray(_useApiHubPreference, 2),\n        perPagePreference = _useApiHubPreference2[0],\n        setPerPagePreference = _useApiHubPreference2[1];\n\n  useEffect(() => {\n    if (perPagePreference !== perPage) {\n      setPerPage(perPagePreference);\n    }\n  }, [perPage, perPagePreference, setPerPage]);\n\n  const handleSetPerPage = newPerPage => {\n    setPerPagePreference(newPerPage);\n  };\n\n  return React.createElement(RaPagination, Object.assign({}, props, {\n    perPage: parseInt(perPagePreference, 10),\n    setPerPage: handleSetPerPage\n  }));\n};\n/**\n * A List component which displays the react-admin list with the title above.\n *\n * @param {*} props The react-admin list properties\n *\n */\n\n\nexport const List = props => {\n  const resource = props.resource,\n        perPage = props.perPage; // Get the initial per page preference per resources\n  // The readApiHubPreference method is used\n  // instead of the useApiHubPreference hook\n  // to not rerender the whole list each time the perPage property changes.\n  // See the <Pagination /> component above to understand the complete usage of the per page preferences.\n\n  const perPagePreference = readApiHubPreference(`perPage/${resource}`, perPage);\n  return React.createElement(React.Fragment, null, React.createElement(ViewTitle, null), React.createElement(RaList, Object.assign({}, props, {\n    perPage: parseInt(perPagePreference, 10),\n    pagination: React.createElement(Pagination, null)\n  })));\n};","map":null,"metadata":{},"sourceType":"module"}